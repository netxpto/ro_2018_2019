\clearpage

\section{MQAM Mapper}

\begin{tcolorbox}	
	\begin{tabular}{p{2.75cm} p{0.2cm} p{10.5cm}} 	
		\textbf{Header File}   &:& m\_qam\_mapper.h \\
		\textbf{Source File}   &:& m\_qam\_mapper.cpp \\
		\textbf{Version}	&:& 20180815(Helena Ribeiro)\\
	\end{tabular}
\end{tcolorbox}

This block does the mapping of the binary signal using a \textit{m}-QAM modulation. It accepts one input signal of the binary type and it produces two output signals which are a sequence of 1's and -1's.

\subsection*{Input Parameters}

\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|c|p{50mm}|cccp{50mm}}
		\cline{1-4}
		\textbf{Parameter} & \textbf{Type} & \textbf{Values} &   \textbf{Default}& \\ \cline{1-4}
		m & int & $2^n$ with $n$ integer & $4$ \\ \cline{1-4}
		iqAmplitudes & vector$<$\texttt{t\_complex}$>$ & 1 or 0 & \{ \{ 1.0, 1.0 \},\{ -1.0, 1.0 \},\{ -1.0, -1.0 \},\{ 1.0, -1.0 \} \} \\ \cline{1-4}
	\end{tabular}
	\caption{Binary source input parameters}
	\label{table:mapper_in_par}
\end{table}

%\begin{itemize}
%	\item m\{4\} \linebreak
%	(m should be of the form $2^n$ with n integer)
%	\item iqAmplitudes\{\{ 1.0, 1.0 \}, \{ -1.0, 1.0 \}, \{ -1.0, -1.0 \}, \{ 1.0, -1.0 \}\} \linebreak
%	
%\end{itemize}

\subsection*{Methods}

MQamMapper(vector$<$Signal *$>$ \&InputSig, vector$<$Signal *$>$ \&OutputSig) :Block(InputSig, OutputSig) \{\};
\bigbreak	
void initialize(void);
\bigbreak	
bool runBlock(void);
\bigbreak	
void setM(int mValue);
\bigbreak	
void setIqAmplitudes(vector$<$t\_iqValues$>$ iqAmplitudesValues);

\subsection*{Functional Description}

In the case of m=4 this block attributes to each pair of bits a point in the I-Q space. The constellation used is defined by the \textit{iqAmplitudes} vector and the Gray codification (Table \ref{gray_table}). The constellation used in this case is illustrated in figure \ref{constellation}.
 
\begin{table}[]
\centering
\begin{tabular}{|l|l|l|l|l|}
\hline
Input & I  & Q \\ \hline
00    & 1  & 1 \\ \hline
10    & -1 & 1 \\ \hline
11    & -1 & -1 \\ \hline
01    & 1  & -1 \\ \hline
\end{tabular}
\caption{Gray codification}
\label{gray_table}
\end{table}

\begin{figure}
	\centering
	\includegraphics[width=\textwidth]{./lib/m_qam_mapper/figures/MQAM_constellation.pdf}
	
	\caption{Constellation used to map the signal for m=4 }\label{constellation}
	
\end{figure}
\pagebreak
\subsection*{Input Signals}

\subparagraph*{Number}: 1

\subparagraph*{Type}: Binary (DiscreteTimeDiscreteAmplitude)

\subsection*{Output Signals}

\subparagraph*{Number}: 2

\subparagraph*{Type}: Sequence of 1's and -1's (DiscreteTimeDiscreteAmplitude)
\pagebreak
\subsection*{Example}
Using the examples from \ref{MQAMinput} and \ref{MQAMoutputs}, when the MQAM-mapper block receives a binary sequence. The block system uses the constellation to analyse and generate two signals: I(t) and Q(t).
\\
\begin{table}[htb]
\caption{Values from example}\label{valuesMQAM}
\centering
\begin{tabular}{|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|l|}
\hline
Input & 01 & 00 & 10 & 10 & 11 & 10 & 01 & 10 & 10 & 00 & 10 & 01 & 11 & 10 & 00 & 10\\ \hline
I & 1 & 1 & -1 & -1 & -1 & -1 & 1 & -1 & -1 & 1 & -1 & 1 & -1 & -1 & 1 & -1 \\ \hline
Q & -1 & 1 & 1 & 1 & -1 & 1 & -1 & 1 & 1 & 1 & 1 & -1 & -1 & 1 & 1 & 1 \\ \hline
\end{tabular}
\end{table}

\begin{figure}[hbtp]
\centering
\includegraphics[scale=0.35]{./lib/m_qam_mapper/figures/S0.PNG}
\caption{Example of the type of input signal analysed by this bolck}\label{MQAMinput}
\end{figure}

\begin{figure}[h]
\centering
\includegraphics[scale=0.35]{./lib/m_qam_mapper/figures/S1_S2.PNG}
\caption{Example of the type of output signals generated by this block}\label{MQAMoutputs}
\end{figure}



%\begin{figure}[h]
%	\centering
%	\includegraphics[clip, trim=0.5cm 9cm 0.5cm 9cm, width=\textwidth]{./lib/m_qam_mapper/figures/MQAM_mapper_output.pdf}
%	
%	\caption{Example of the type of signal generated by this block for the initial binary signal 0100... }\label{DeterministicAppendZeros}
%
%\end{figure}

%\subsection*{Sugestions for future improvement}
